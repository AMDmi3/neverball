
#------------------------------------------------------------------------------

# The INCDIR variable will probably need to be changed depending on where
# you have installed the SDL headers.

INCDIR= /I C:\SDL\include
LIBDIR= /LIBPATH:C:\SDL\lib
#------------------------------------------------------------------------------

CFLAGS= /Ox

SYS_LIBS= glu32.lib opengl32.lib kernel32.lib user32.lib gdi32.lib
SDL_LIBS= SDL.lib SDLmain.lib

MAPC_TARG= mapc.exe
GAME_TARG= neverball.exe

MAPC_OBJS= \
	vec3.obj   \
	solid.obj  \
	glext.obj  \
	mapc.obj
GAME_OBJS= \
	vec3.obj   \
	text.obj   \
	image.obj  \
	audio.obj  \
	solid.obj  \
	hud.obj    \
	part.obj   \
	geom.obj   \
	back.obj   \
	game.obj   \
	level.obj  \
	set.obj    \
	menu.obj   \
	state.obj  \
	config.obj \
	glext.obj  \
	main.obj

MAPC_FLAGS= /nologo /subsystem:console
GAME_FLAGS= /nologo /subsystem:windows

MAPC_LIBS= SDL_image.lib $(SDL_LIBS) $(SYS_LIBS)
GAME_LIBS= SDL_ttf.lib SDL_mixer.lib SDL_image.lib $(SDL_LIBS) $(SYS_LIBS)

SOLS= \
	data\sol-rlk\title.sol    \
	data\sol-rlk\pipe.sol     \
	data\sol-rlk\pyramid.sol  \
	data\sol-rlk\greed.sol    \
	data\sol-rlk\easytele.sol \
	data\sol-rlk\drops.sol    \
	data\sol-rlk\curbs.sol    \
	data\sol-rlk\rampdn.sol   \
	data\sol-rlk\invis.sol    \
	data\sol-rlk\plinko.sol   \
	data\sol-rlk\telemaze.sol \
	data\sol-rlk\islands.sol  \
	data\sol-rlk\check.sol    \
	data\sol-rlk\bumps.sol    \
	data\sol-rlk\corners.sol  \
	data\sol-rlk\peasy.sol    \
	data\sol-rlk\timer.sol    \
	data\sol-rlk\bumper.sol   \
	data\sol-rlk\stairs.sol   \
	data\sol-rlk\tilt.sol     \
	data\sol-rlk\gaps.sol     \
	data\sol-rlk\spiralin.sol \
	data\sol-rlk\locks.sol    \
	data\sol-rlk\easy.sol     \
	data\sol-rlk\coins.sol    \
	data\sol-rlk\goslow.sol   \
	data\sol-rlk\fence.sol    \
	data\sol-rlk\hole.sol     \
	data\sol-rlk\zigzag.sol   \
	data\sol-rlk\mover.sol    \
	data\sol-rlk\wakka.sol    \
	data\sol-rlk\curved.sol   \
	data\sol-rlk\sync.sol     \
	data\sol-rlk\grid.sol     \
	data\sol-rlk\maze.sol     \
	data\sol-rlk\spiraldn.sol \
	data\sol-rlk\spiralup.sol \
	data\sol-rlk\rampup.sol   \
	data\sol-rlk\goals.sol    \
	data\sol-rlk\risers.sol   \
	data\sol-rlk\quads.sol    \
	data\sol-rlk\frogger.sol  \
	data\sol-rlk\angle.sol    \
	data\sol-rlk\spread.sol   \
	data\sol-rlk\four.sol     \
	data\sol-rlk\hump.sol     \
	data\sol-rlk\movers.sol   \
	data\sol-rlk\poker.sol    \
	data\sol-rlk\ring.sol     \
	data\sol-rlk\teleport.sol

#------------------------------------------------------------------------------

.SUFFIXES : .c .obj .map .sol

.c.obj :
	cl /nologo /MD $(CFLAGS) /c $< $(INCDIR)

{data\map-rlk}.map{data\sol-rlk}.sol :
	$(MAPC_TARG) $< $@ data

{data\map-mym}.map{data\sol-mym}.sol :
	$(MAPC_TARG) $< $@ data

#------------------------------------------------------------------------------

all : $(GAME_TARG) $(MAPC_TARG) $(SOLS)

$(GAME_TARG) : $(GAME_OBJS)
	link $(GAME_FLAGS) /out:$(GAME_TARG) $(GAME_OBJS) $(GAME_LIBS) $(LIBDIR)

$(MAPC_TARG) : $(MAPC_OBJS)
	link $(MAPC_FLAGS) /out:$(MAPC_TARG) $(MAPC_OBJS) $(MAPC_LIBS) $(LIBDIR)

clean :
	del $(GAME_TARG) $(GAME_OBJS)
	del $(MAPC_TARG) $(MAPC_OBJS)
	del /q data\sol-rlk\*.sol
	del /q data\sol-mym\*.sol
	del /q *.txt

dist :
        del $(GAME_OBJS)
        del $(MAPC_OBJS)
        del *.c
        del *.h
        del *.txt
        del data\.neverball*

#------------------------------------------------------------------------------
